<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redis Power | Rate Limit & Auth</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <h1>Redis <span class="highlight">Power</span></h1>
            <p>High-Performance Rate Limiting & JWT Authentication</p>
        </header>

        <main>
            <!-- Login Section -->
            <section id="auth-section" class="card">
                <h2>1. Redis for Authentication (Session Caching)</h2>
                <div class="info-box">
                    <h3>Why use Redis?</h3>
                    <p>Traditional databases (SQL) are slow for checking sessions on every request. Redis stores active
                        sessions in <strong>RAM</strong>, allowing for sub-millisecond validation.</p>
                    <p><strong>Demo Logic:</strong> When you login, we generate a JWT and store it in Redis with a
                        <strong>15-second TTL (Time To Live)</strong>. When the time is up, Redis <em>automatically</em>
                        deletes the key, instantly revoking access.
                    </p>
                </div>

                <div class="form-group">
                    <input type="text" id="username" placeholder="Username (admin)" value="admin">
                    <input type="password" id="password" placeholder="Password (password123)" value="password123">
                    <button id="login-btn" class="btn primary">Login with Redis</button>
                    <button id="logout-btn" class="btn secondary hidden">Logout</button>
                </div>

                <div id="auth-status" class="status-box">Not Logged In</div>

                <!-- Session Timer -->
                <div id="session-timer" class="timer-box hidden">
                    Session Expires in: <span id="countdown">0</span>s
                </div>

                <div class="actions hidden" id="protected-actions">
                    <button id="protected-btn" class="btn accent">Access Protected Data</button>
                    <div id="protected-result" class="result-box"></div>
                </div>
            </section>

            <!-- Rate Limiting Section -->
            <section id="ratelimit-section" class="card">
                <h2>2. Redis for Rate Limiting</h2>
                <div class="info-box">
                    <h3>How it works</h3>
                    <p>We use Redis <strong>Atomic Counters</strong> (`INCR`). Every time you hit the API, we increment
                        a counter for your IP address.</p>
                    <p>If the counter exceeds <strong>5 requests</strong> within a <strong>10-second window</strong>,
                        the backend rejects the request. Redis handles the expiration of this window automatically.</p>
                </div>

                <p>Try to spam the button below. Redis will block you after 5 requests in 10 seconds.</p>
                <button id="spam-btn" class="btn danger">Spam API Endpoint</button>
                <div id="spam-result" class="result-box"></div>

                <div class="stats">
                    <div class="stat-item">
                        <span class="label">Requests:</span>
                        <span id="rl-count" class="value">0 / 5</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">Resets in:</span>
                        <span id="rl-timer" class="value">10s</span>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>

</html>